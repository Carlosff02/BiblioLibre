 <!-- Main Content -->
    <main class="container mx-auto px-6 py-16">
        <div class="flex flex-col lg:flex-row gap-12">

            <!-- Filters Sidebar -->
            <aside class="w-full lg:w-1/4">
                <h3 class="text-2xl font-bold text-gray-900 mb-6">Filtros</h3>
                <div class="bg-white p-6 rounded-lg shadow-md">
  <h4 class="font-semibold text-lg mb-4 border-b pb-3">Idioma</h4>
  <ul class="space-y-3">
    <li>
      <a
        (click)="seleccionarIdioma('english')"
        class="transition-colors cursor-pointer"
        [ngClass]="{
          'text-indigo-600 font-semibold': idiomaSeleccionado === 'todos',
          'text-gray-700 hover:text-indigo-600': idiomaSeleccionado !== 'todos'
        }"
      >
        Todos
      </a>
    </li>
    <li>
      <a
        (click)="seleccionarIdioma('english')"
        class="transition-colors cursor-pointer"
        [ngClass]="{
          'text-indigo-600 font-semibold': idiomaSeleccionado === 'english',
          'text-gray-700 hover:text-indigo-600': idiomaSeleccionado !== 'english'
        }"
      >
        Inglés
      </a>
    </li>
    <li>
      <a
        (click)="seleccionarIdioma('español')"
        class="transition-colors cursor-pointer"
        [ngClass]="{
          'text-indigo-600 font-semibold': idiomaSeleccionado === 'español',
          'text-gray-700 hover:text-indigo-600': idiomaSeleccionado !== 'español'
        }"
      >
        Español
      </a>
    </li>

  </ul>
</div>

            </aside>

            <!-- Search Results -->
            <section class="w-full lg:w-3/4">
                <div class="flex justify-between items-center mb-6">
                     <h2 class="text-3xl font-bold text-gray-900">Resultados de Búsqueda</h2>
                     <span class="text-gray-500">Mostrando 1-12 de {{totalElementos}} libros</span>
                </div>



                <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6">

                     @for (libro of libros(); track $index) {
                        <a [routerLink]="['visor', libro.titulo]">
      <div class="book-card bg-white rounded-2xl shadow-lg overflow-hidden h-96 flex flex-col transition-transform duration-200 hover:-translate-y-1 hover:shadow-xl">
        <img [src]="libro.imgSrc" alt="Portada" class="h-56 w-full object-cover">
        <div class="p-4 flex flex-col justify-between flex-1">
          <h4 class="font-bold text-lg line-clamp-2 text-gray-800">{{ libro.titulo }}</h4>
          <p class="text-sm text-gray-600 mt-3">{{ libro.autor?.nombre || 'Autor desconocido' }}</p>
        </div>
      </div>
    </a>
                }


                    <!-- End of samples -->
                </div>

                <!-- Pagination -->
                <nav class="mt-12 flex justify-center items-center select-none">

  <!-- Botón anterior -->
  <button
    class="pagination-link flex items-center justify-center w-10 h-10 border rounded-full mr-2 text-gray-600 hover:bg-indigo-500 hover:text-white disabled:opacity-40 disabled:cursor-not-allowed"
    [disabled]="page === 1"
    (click)="cambiarPagina(page - 1)">
    <i class="gg-chevron-left"></i>
  </button>

  <!-- Números de página -->
  <ng-container *ngFor="let p of paginasVisibles">
    <button
      class="pagination-link w-10 h-10 border rounded-full mr-2 flex items-center justify-center font-semibold"
      [ngClass]="{
        'bg-indigo-600 text-white border-indigo-600': page === p,
        'text-gray-600 hover:bg-indigo-500 hover:text-white': page !== p
      }"
      (click)="cambiarPagina(p)">
      {{ p }}
    </button>
  </ng-container>

  <!-- Si hay muchas páginas -->
  <span *ngIf="totalPaginas > maxVisible && paginasVisibles[paginasVisibles.length-1] < totalPaginas"
        class="mr-2 text-gray-500">...</span>

  <!-- Última página -->
  <button
    *ngIf="totalPaginas > maxVisible && paginasVisibles[paginasVisibles.length-1] < totalPaginas"
    class="pagination-link w-10 h-10 border rounded-full mr-2 flex items-center justify-center font-semibold text-gray-600 hover:bg-indigo-500 hover:text-white"
    (click)="cambiarPagina(totalPaginas)">
    {{ totalPaginas }}
  </button>

  <!-- Botón siguiente -->
  <button
    class="pagination-link flex items-center justify-center w-10 h-10 border rounded-full text-gray-600 hover:bg-indigo-500 hover:text-white disabled:opacity-40 disabled:cursor-not-allowed"
    [disabled]="page === totalPaginas"
    (click)="cambiarPagina(page + 1)">
    <i class="gg-chevron-right"></i>
  </button>
</nav>

            </section>
        </div>
    </main>
  <!-- Spinner pantalla completa -->
   @if (procesandoDatos) {
<div  class="fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 z-50">
  <div class="relative w-16 h-16">
    <!-- Círculo exterior -->
    <div class="absolute inset-0 rounded-full border-4 border-blue-500 border-t-transparent animate-spin"></div>
    <!-- Brillo interno -->
    <div class="absolute inset-2 rounded-full border-4 border-t-blue-300 border-transparent animate-spin-slow"></div>
  </div>
</div>

}
